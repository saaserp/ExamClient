<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><title>Outputting Results - Betwixt</title><style type="text/css" media="all">
          @import url("../style/maven-base.css");
          
          @import url("../style/maven-theme.css");@import url("../style/project.css");</style><link rel="stylesheet" href="../style/print.css" type="text/css" media="print"></link><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></meta><meta name="author" content="Robert Burrell Donkin"></meta><meta name="email" content="rdonkin@apache.org"></meta></head><body class="composite"><div id="banner"><a href="http://jakarta.apache.org" id="organizationLogo"><img alt="The Apache Software Foundation" src="http://jakarta.apache.org/images/original-jakarta-logo.gif"></img></a><a href="http://jakarta.apache.org/commons/betwixt/" id="projectLogo"><img alt="Betwixt" src="../images/logo.png"></img></a><div class="clear"><hr></hr></div></div><div id="breadcrumbs"><div class="xleft">Last published: 21 December 2006
                <span class="separator">|</span> Doc for  0.8
                </div><div class="xright">
        
        <a href="http://jakarta.apache.org/commons/" class="externalLink" title="External Link">Jakarta Commons</a>
      </div><div class="clear"><hr></hr></div></div><div id="leftColumn"><div id="navcolumn"><div id="menuCommons_Betwixt"><h5>Commons Betwixt</h5><ul><li class="none"><a href="../index.html">Overview</a></li><li class="none"><a href="../faq.html">FAQ</a></li><li class="none"><a href="../apidocs/index.html">Javadoc</a></li><li class="none"><a href="../mail-lists.html">Mailing lists</a></li><li class="none"><a href="../team-list.html">Team</a></li><li class="none"><a href="../community.html">Community</a></li><li class="none"><a href="../powered.html">Powered By</a></li><li class="none"><a href="../tasks.html">Tasks</a></li><li class="none"><a href="http://svn.apache.org/viewcvs.cgi/jakarta/commons/proper/betwixt/trunk/" class="externalLink" title="External Link">View SVN</a></li><li class="none"><a href="http://svn.apache.org/repos/asf/jakarta/commons/proper/betwixt/" class="externalLink" title="External Link">SVN</a></li></ul></div><div id="menuUser_guide"><h5>User guide</h5><ul><li class="none"><a href="../guide/start.html">Getting Started</a></li><li class="none"><a href="../guide/binding.html">Binding Beans</a></li><li class="none"><a href="../guide/derived.html">Derived Bindings</a></li><li class="none"><a href="../guide/writing.html">Writing Beans(Advanced)</a></li><li class="none"><strong><a href="../guide/output.html">Outputting The Results</a></strong></li><li class="none"><a href="../guide/reading.html">Reading Beans(Advanced)</a></li><li class="none"><a href="../guide/integration.html">Integrating</a></li><li class="none"><a href="../guide/examples.html">Examples</a></li><li class="none"><a href="../guide/tutorial.html">Tutorial</a></li></ul></div><div id="menuRelease_Documentation"><h5>Release Documentation</h5><ul><li class="none"><a href="http://jakarta.apache.org/commons/betwixt/betwixt-0.7" class="externalLink" title="External Link">0.7</a></li><li class="none"><a href="http://jakarta.apache.org/commons/betwixt/betwixt-0.6" class="externalLink" title="External Link">0.6</a></li><li class="none"><a href="http://jakarta.apache.org/commons/betwixt/betwixt-0.5" class="externalLink" title="External Link">0.5</a></li></ul></div><div id="menuProject_Documentation"><h5>Project Documentation</h5><ul><li class="none"><a href="../index.html">About</a></li><li class="collapsed"><a href="../project-info.html">Project Info</a></li><li class="collapsed"><a href="../maven-reports.html">Project Reports</a></li><li class="none"><a href="http://jakarta.apache.org/commons/charter.html" class="externalLink" title="External Link">Development Process</a></li></ul></div><div id="menuCommons"><h5>Commons</h5><ul><li class="none"><a href="http://jakarta.apache.org/commons/" class="externalLink" title="External Link">Home</a></li><li class="collapsed"><a href="http://jakarta.apache.org/commons/components.html" class="externalLink" title="External Link">Components</a></li><li class="collapsed"><a href="http://jakarta.apache.org/commons/sandbox/index.html" class="externalLink" title="External Link">Sandbox</a></li><li class="collapsed"><a href="http://jakarta.apache.org/commons/dormant/index.html" class="externalLink" title="External Link">Dormant</a></li><li class="none"><a href="http://jakarta.apache.org/commons/volunteering.html" class="externalLink" title="External Link">Volunteering</a></li><li class="none"><a href="http://jakarta.apache.org/commons/patches.html" class="externalLink" title="External Link">Contributing Patches</a></li><li class="none"><a href="http://jakarta.apache.org/commons/building.html" class="externalLink" title="External Link">Building Components</a></li><li class="none"><a href="http://jakarta.apache.org/commons/releases/index.html" class="externalLink" title="External Link">Releasing Components</a></li><li class="none"><a href="http://wiki.apache.org/jakarta-commons/FrontPage" class="externalLink" title="External Link">Wiki</a></li></ul></div><div id="legend"><h5>Legend</h5><ul><li class="externalLink">External Link</li><li class="newWindow">Opens in a new window</li></ul></div><a href="http://maven.apache.org/" title="Built by Maven" id="poweredBy"><img alt="Built by Maven" src="../images/logos/maven-feather.png"></img></a></div></div><div id="bodyColumn"><div class="contentBox"><div class="section"><a name="Outputting_Results__Of_Bean_Writing_"></a><h2>Outputting Results (Of Bean Writing)</h2>
        <p>
Betwixt is flexible when it comes to outputting the results of bean writing.
The abstract <code>AbstractBeanWriter</code> class provides a basic framework
with an implementation API inspired by <a href="http://www.saxproject.org/" class="externalLink" title="External Link">SAX</a>.
Betwixt ships with writers that support SAX and textual streams
but others can be created with relative ease.
    </p>
</div><div class="section"><a name="Pushing_Results_to_a_Textual_Stream"></a><h2>Pushing Results to a Textual Stream</h2>
        <p>
<code>BeanWriter</code> pushes results to a textual stream. This can be used
to efficiently push content through a socket or just to create a simple String.
        </p> 
        <p>
<strong>Note</strong> that only document fragments are created so you may need to append any
prologs before writing the bean.
    </p>
        <p>
<strong>Note:</strong> also that Betwixt leaves management of the streams and readers to the 
user (respecting the maxim that the opener should close). When a fragment has been written, Betwixt will 
not close the stream automatically. However, for convenience, <code>close()</code> and <code>flush</code> 
methods have been provided in <code>BeanWriter</code> which will close or flush (respectively) the underlying 
stream or reader.
    </p>
        <div class="subsection"><a name="Rendering_Empty_Tags"></a><h3>Rendering Empty Tags</h3>
            <p>
Empty tags (ones containing no body content and no child nodes) can be rendered 
in two ways: as a single closed tag (for example <code>&lt;element/&gt;</code>) or as a 
pair of tags (<code>&lt;element&gt;&lt;/element&gt;</code>). By default, Betwixt
renders empty tags as a single close tag but setting the <code>BeanWriter</code>
<code>endTagForEmptyElement</code> to true will ensures that all empty elements are 
rendered as a pair of tags. For example:
        </p>

    <div class="source"><pre>
        BeanWriter writer = new BeanWriter(out);
        writer.setEndTagForEmptyElement(true);
</pre></div>
  
    </div>
        <div class="subsection"><a name="Content_Encoding"></a><h3>Content Encoding</h3>
            <p>
When writing character data (the content between markup tags) to a textual stream,
sections of character data can be processed in various ways by Betwixt with the
aim of easily producing valid xml from beans. In particular, Betwixt assumes that
bean's property values are plain java rather than pre-processed xml and so
may contain characters that should be escaped.
        </p>
            <p>
There are two primary use cases for this processing: 
        </p>
            <ul>    
                <li>
Escaping the character data
            </li>
                <li>
Wrapping the entire section as <code>CDATA</code>
            </li>
        </ul>
            <p>
Betwixt provides a plug-in 
<a href="../apidocs/org/apache/commons/betwixt/strategy/MixedContentEncodingStrategy.html">
MixedCharacterEncodingStrategy</a>
and a property on
<a href="../apidocs/org/apache/commons/betwixt/io/BeanWriter.html">BeanWriter</a>
which allows the processing to be varied.
Factory constants are provided on <code>MixedCharacterEncodingStrategy</code>
for the two common use cases above.
        </p>
            <p>
For example, to have all content wrapped in <code>CDATA</code> sections:
        </p>

    <div class="source"><pre>
        BeanWriter writer = ... 
        writer.setMixedContentEncodingStrategy(MixedContentEncodingStrategy.CDATA);
</pre></div>
  
            <p>
By default, Betwixt uses character escaping only. However, the default
strategy also supports per-property specification through
setting the appropriate <a href="binding.html#Using%20Options">option</a>.
Setting the <code>org.apache.commons.betwixt.mixed-content-encoding</code>
option to <code>CDATA</code> will instruct the default strategy to wrap
the element's body text in a CDATA section.
For example, the following betwixt file fragment encodes the 
<code>some-property</code> element's body text as CDATA
(when the default strategy is used):
        </p>

    <div class="source"><pre>

&lt;?xml version='1.0'?&gt;
&lt;info primitiveTypes="attribute"&gt;
	&lt;element name='some-bean'&gt;
        ...
		&lt;element name='some-property' property='someProperty'&gt;
			&lt;option&gt;
				&lt;name&gt;org.apache.commons.betwixt.mixed-content-encoding&lt;/name&gt;
				&lt;value&gt;CDATA&lt;/value&gt;
			&lt;/option&gt;
		&lt;/element&gt;
        ...
	&lt;/element&gt;
&lt;/info&gt;

</pre></div>
  
    </div>
</div><div class="section"><a name="Pushing_Results_to_SAX"></a><h2>Pushing Results to SAX</h2>
        <p>
<code>SAXBeanWriter</code> pushes events to a SAX content handler. 
This allows Betwixt to efficiently participate as a content generator
in SAX-based pipelines such as <a href="http://cocoon.apache.org/" class="externalLink" title="External Link">cocoon</a>.
    </p>
</div></div></div><div class="clear"><hr></hr></div><div id="footer"><div class="xright">© 2002-2006, The Apache Software Foundation</div><div class="clear"><hr></hr></div></div></body></html>